<?xml version='1.0'?>

<robot name="myrobot" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <xacro:property name="cameraSize" value="0.02"/>
  <xacro:property name="cameraMass" value="0.001"/>
  <xacro:property name="wheelMass" value="0.4"/>

  <xacro:include filename="$(find mybot_description)/urdf/mybot.gazebo" />
  <xacro:include filename="$(find mybot_description)/urdf/materials.xacro" />



  <!--xacro:arg name="velodyne_points" default="true"/>
  <xacro:arg name="front_laser_points" default="true"/>
  <xacro:property name="front_laser_points" value="$(arg front_laser_points)"/>
  <xacro:property name="velodyne_points" value="$(arg velodyne_points)"/>
    <xacro:if value="${front_laser_points}">
    	<xacro:include filename="$(find catvehicle)/urdf/catvehicle_front_laser_points.gazebo"/>
    </xacro:if>
    <xacro:if value="${velodyne_points}"-->
      <!-- You can pass parameters in order to change the max/min
           horizontal angles of the velodyne sensors. These are interpreted 
           in the velodyne_points gazebo file -->
      <!--xacro:include filename="$(find catvehicle)/urdf/catvehicle_velodyne_points.gazebo"/>
    </xacro:if>
  <xacro:property name="sensor_box" value="0.25"/>
  <xacro:property name="sensor_box2" value="0.31"/-->








  <!--link name="base_footprint">
    <inertial>
      <mass value="0.0001"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.0001" ixy="0.0" ixz="0.0" iyy="0.0001" iyz="0.0" izz="0.0001"/>
    </inertial>
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <box size="0.001 0.001 0.001"/>
      </geometry>
    </visual>
  </link>
  <gazebo reference="base_footprint">
    <turnGravityOff>false</turnGravityOff>
  </gazebo>
  <joint name="base_footprint_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0.04"/>
    <parent link="base_footprint"/>
    <child link="base_link"/>
  </joint-->

<link name="base_link">
    <pose xyz="0 0 0.0" rpy="0 0 0" />

  <inertial>
    <mass value="10.0"/>
    <origin xyz="0 0 0.05" rpy="0 0 0"/>
    <inertia ixx="0.01632" ixy="0.0" ixz="0.0" iyy="0.01632" iyz="0.0" izz="0.01632"/>
  </inertial>

  <collision name='collision'>
    <origin xyz="0 0 0.05" rpy="0 0 0" />
    <geometry>
      <!--box size="0.382 0.12 0.072"/-->
      <box size="0.382 0.12 0.1"/>
    </geometry>
  </collision>

  <visual name='base_link_visual'>
    <origin xyz="0 0 0.05" rpy="0 0 0"/>
    <geometry>
      <!--box size="0.382 0.12 0.072"/-->
      <box size="0.382 0.12 0.1"/>
    </geometry>
  </visual>  

</link>



<joint type="continuous" name="joint_R1">
  <parent link="base_link"/>
  <child link="R1"/>
  <origin xyz="0.1501 -0.0908 0" rpy="0 0 0"/>
  <axis xyz="0 1 0" rpy="0 0 0"/>
  <limit effort="10000" velocity="1000"/>
  <joint_properties damping="1.0" friction="1.0"/>
</joint>

<link name="R1">
  
  <collision name='collision'>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <geometry>
      <cylinder radius="0.05" length="0.056"/>
    </geometry>
    <surface>
      <friction>
        <ode>
          <mu>1</mu>
          <mu2>1</mu2>
          <slip1>0.5</slip1>
          <slip2>0</slip2>
        </ode>
      </friction>
    </surface>
  </collision>

  <visual name='R1_visual'>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <geometry>
      <cylinder radius="0.05" length="0.056"/>
    </geometry>
  </visual>

  <inertial>
    <mass value="${wheelMass}"/>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <inertia ixx="0.035453" ixy="0.0" ixz="0.0" iyy="0.035453" iyz="0.0" izz="0.06272"/>
  </inertial>
</link>

  <transmission name="R1_joint_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_R1"/>
    <actuator name="R1_joint_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>




<joint type="continuous" name="joint_R2">
  <parent link="base_link"/>
  <child link="R2"/>
  <origin xyz="-0.1501 -0.0908 0" rpy="0 0 0"/>
  <axis xyz="0 1 0" rpy="0 0 0"/>
  <limit effort="10000" velocity="1000"/>
  <joint_properties damping="1.0" friction="1.0"/>
</joint>


<link name="R2">
  <collision name='collision'>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <geometry>
      <cylinder radius="0.05" length="0.056"/>
    </geometry>
    <surface>
      <friction>
        <ode>
          <mu>1</mu>
          <mu2>1</mu2>
          <slip1>0.5</slip1>
          <slip2>0</slip2>
        </ode>
      </friction>
    </surface>
  </collision>


  <visual name='R2_visual'>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <geometry>
      <cylinder radius="0.05" length="0.056"/>
    </geometry>
  </visual>

  <inertial>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <mass value="${wheelMass}"/>
    <inertia ixx="0.035453" ixy="0.0" ixz="0.0" iyy="0.035453" iyz="0.0" izz="0.06272"/>
  </inertial>
</link>

  <transmission name="R2_joint_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_R2"/>
    <actuator name="R2_joint_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>



<joint name="joint_L1" type="continuous">
  <parent link="base_link"/>
  <child link="L1"/>
  <origin xyz="0.1501 0.0908 0" rpy="0 0 0"/>
  <axis xyz="0 1 0"/>
  <limit effort="10000" velocity="1000"/>
  <joint_properties damping="1.0" friction="1.0"/>
</joint>


<link name="L1">
  <collision name='collision'>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <geometry>
      <cylinder radius="0.05" length="0.056"/>
    </geometry>
    <surface>
      <friction>
        <ode>
          <mu>1</mu>
          <mu2>1</mu2>
          <slip1>0.5</slip1>
          <slip2>0</slip2>
        </ode>
      </friction>
    </surface>
  </collision>

  <visual name='L1_visual'>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <geometry>
      <cylinder radius="0.05" length="0.056"/>
    </geometry>
  </visual>

  <inertial>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <mass value="${wheelMass}"/>
    <inertia ixx="0.035453" ixy="0.0" ixz="0.0" iyy="0.035453" iyz="0.0" izz="0.06272"/>
    </inertial>
</link>

  <transmission name="L1_joint_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_L1"/>
    <actuator name="L1_joint_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>




<joint name="joint_L2" type="continuous">
  <parent link="base_link"/>
  <child link="L2"/>
  <origin xyz="-0.1501 0.0908 0" rpy="0 0 0" />
  <axis xyz="0 1 0" rpy="0 0 0"/>
  <limit effort="10000" velocity="1000"/>
  <joint_properties damping="1.0" fiction="1.0"/>
</joint>

<link name="L2">
  <collision name='collision'>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <geometry>
      <cylinder radius="0.05" length="0.056"/>
    </geometry>
    <surface>
      <friction>
        <ode>
          <mu>1</mu>
          <mu2>1</mu2>
          <slip1>0.5</slip1>
          <slip2>0</slip2>
        </ode>
      </friction>
    </surface>
  </collision>

  <visual name='L2_visual'>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <geometry>
      <cylinder radius="0.05" length="0.056"/>
    </geometry>
  </visual>

  <inertial>
    <origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
    <mass value="${wheelMass}"/>
    <inertia ixx="0.035453" ixy="0.0" ixz="0.0" iyy="0.035453" iyz="0.0" izz="0.06272"/>
  </inertial>
</link>

  <transmission name="L2_joint_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <joint name="joint_L2"/>
    <actuator name="L2_joint_motor">
      <hardwareInterface>EffortJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
    </actuator>
  </transmission>



  <link name="camera">
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="${cameraSize} ${cameraSize} ${cameraSize}"/>
      </geometry>
    </collision>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="${cameraSize} ${cameraSize} ${cameraSize}"/>
      </geometry>
      <material name="green"/>
    </visual>

    <inertial>
      <mass value="${cameraMass}" />
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <box_inertia m="${cameraMass}" x="${cameraSize}" y="${cameraSize}" z="${cameraSize}" />
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
    </inertial>
  </link>

  <joint name="camera_joint" type="fixed">
    <axis xyz="0 1 0" />
    <!--origin xyz="0.2015 0 0.05" rpy="0 0 0"/-->
    <origin xyz="0.2015 0 0.085" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="camera"/>
  </joint>



  <!--link name="camera2">
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="${cameraSize} ${cameraSize} ${cameraSize}"/>
      </geometry>
    </collision>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="${cameraSize} ${cameraSize} ${cameraSize}"/>
      </geometry>
      <material name="green"/>
    </visual>

    <inertial>
      <mass value="${cameraMass}" />
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <box_inertia m="0.000000001" x="${cameraSize}" y="${cameraSize}" z="${cameraSize}" />
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
    </inertial>
  </link>

  <joint name="camera2_joint" type="fixed">
    <axis xyz="0 1 0" />
    <origin xyz="0.2015 0.03 0.05" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="camera2"/>
  </joint-->



<!--joint name="cameraLeft_joint" type="fixed">
    <origin xyz=".2015 -0.05 0.05" rpy="0 0 0"/>
    <parent link="base_link"/>
    <child link="cameraLeft_link"/>
  </joint>

  <link name="cameraLeft_link">
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <box size="0.02 0.02 0.02"/>
      </geometry>
    </collision>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
    <box size="0.02 0.02 0.02"/>
      </geometry>
      <material name="orange"/>
    </visual>

    <inertial> 
      <origin xyz="0 0 0" rpy="0 0 0"/> 
      <mass value="0.001"/> 
      <box_inertia m="0.001" x="0.02" y="0.02" z="0.02"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
    </inertial>
  </link>

  
  <joint name="cameraLeft_depth_joint" type="fixed">
    <origin xyz="0 0 0" rpy="-1.5707 0 -1.5707 "/>
    <parent link="cameraLeft_link"/>
    <child link="cameraLeft_depth_link"/>
  </joint>

  <link name="cameraLeft_depth_link"></link-->






<!--joint name="camera_joint" type="fixed">
<origin xyz="0 0 0.121" rpy="0 0 0"/>
	<axis xyz="0 0 1"/>
	<parent link="base_link"/>
	<child link="camera_link"/>
</joint>

<link name="camera_link">
	<collision>
	  <origin xyz="0 0 0" rpy="0 0 0"/>
	  <geometry>
	   <box size="${sensor_box} ${sensor_box} ${sensor_box}"/>
	  </geometry>
	</collision>

	<visual>
	  <origin xyz="0 0 0" rpy="0 0 0"/>
	  <geometry>
	  <box size="${sensor_box} ${sensor_box} ${sensor_box}"
/>
          </geometry>
	</visual>

    <inertial>
      <mass value="1e-5" />
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
    </inertial>
</link>



<joint name="velodyne_joint" type="fixed">
	<origin xyz="0 0 1.965" rpy="0 0 0"/>
	<axis xyz="0 0 1"/>
	<parent link="camera_link"/>
	<child link="velodyne_link"/>
</joint>

<link name="velodyne_link">
        <collision>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
           <box size="0.1 0.1 0.1"/>
          </geometry>
        </collision>

        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
           <box size="${sensor_box} ${sensor_box} ${sensor_box}"/>
          </geometry>
        </visual>

    <inertial>
      <mass value="1e-5" />
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
    </inertial>
</link>

<joint name="front_laser_joint" type="fixed">
	<origin xyz="0 0 2" rpy="0 0 0"/>
	<axis xyz="0 0 1"/>
	<parent link="base_link"/>
	<child link="front_laser_link"/>
</joint>

<link name="front_laser_link">
     <parent link="front_laser_joint"/>
        <collision>
          <origin xyz="0 0 0" rpy="0 0.0 0"/>
          <geometry>
           <box size="${sensor_box} ${sensor_box} ${sensor_box}"/>
          </geometry>
        </collision>

        <visual>
          <origin xyz="0 0 0" rpy="0 0 0"/>
          <geometry>
           <box size="${sensor_box} ${sensor_box} ${sensor_box}"/>
          </geometry>
        </visual>

    <inertial>
      <mass value="1e-5" />
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <inertia ixx="1e-6" ixy="0" ixz="0" iyy="1e-6" iyz="0" izz="1e-6" />
    </inertial>
</link-->


  <joint name="hokuyo_joint" type="fixed">
    <axis xyz="0 1 0" />
    <origin xyz="0.0 0 0.122" rpy="0 0 0"/>
    <parent link="base_link"/> 
    <child link="hokuyo"/>
  </joint>

  <!-- Hokuyo Laser -->
  <link name="hokuyo">
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
    <box size="0.1 0.1 0.1"/>
      </geometry>
    </collision>

    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry>
        <mesh filename="package://mybot_description/meshes/hokuyo.dae"/>
      </geometry>
    </visual>

    <inertial>
      <mass value="0.0001" />
      <origin xyz="0 0 0" rpy="0 1.5707 0"/>
      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001" />
    </inertial>
  </link>

  <link name="caster_front_link">
    <visual>
      <origin rpy="1.57079632679 0 0" xyz="0 0.02 0"/>
      <geometry>
        <sphere radius="0.025"/>
      </geometry>
      <material name="Black"/>
    </visual>
    <collision>
      <geometry>
        <sphere radius="0.025"/>
      </geometry>
      <origin rpy="1.57079632679 0 0" xyz="0 0.02 0"/>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <joint name="caster_front_joint" type="fixed">
    <parent link="base_link"/>
    <child link="caster_front_link"/>
    <origin rpy="-1.57079632679 0 0" xyz="0.115 0.0 0.007"/>
  </joint>
  <gazebo reference="caster_front_link">
    <turnGravityOff>false</turnGravityOff>
  </gazebo>

  <link name="caster_back_link">
    <visual>
      <origin rpy="1.57079632679 0 0" xyz="0.02 0.02 0 "/>
      <geometry>
        <sphere radius="0.025"/>
      </geometry>
      <material name="Black"/>
    </visual>
    <collision>
      <geometry>
        <sphere radius="0.025"/>
      </geometry>
      <origin rpy="1.57079632679 0 0" xyz="0.02 0.02 0 "/>
    </collision>
    <inertial>
      <mass value="0.5"/>
      <origin xyz="0 0 0"/>
      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.001" iyz="0.0" izz="0.001"/>
    </inertial>
  </link>
  <joint name="caster_back_joint" type="fixed">
    <parent link="base_link"/>
    <child link="caster_back_link"/>
    <origin rpy="-1.57079632679 0 0" xyz="-0.135 0.0 0.009"/>
  </joint>
  <gazebo reference="caster_back_link">
    <turnGravityOff>false</turnGravityOff>
  </gazebo>



</robot>
